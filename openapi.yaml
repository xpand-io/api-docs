openapi: 3.0.3

info:
  title: Xpand API
  version: v2

tags:
  - name: Users
  - name: Offers
  - name: References

paths:
  /api/v2/users:
    get:
      tags:
        - Users
      summary: Fetch & search users
      parameters:
        - name: filter[ids]
          in: query
          description: "Comma separated list of Xpand User IDs"
          schema:
            type: array
            items:
              type: string
          explode: false
          example: "64891c74d5ee1bb16dfdafd8,64891e2ad5ee1bb16dfdafd9"
        - name: filter[emails]
          in: query
          description: "Comma separated list of User Emails"
          schema:
            type: array
            items:
              type: string
          explode: false
          example: "john@example.com,jane@example.com"
        - name: page
          in: query
          schema:
            type: integer
            default: 1
          example: 7
      responses:
        "200":
          description: Successful responnse
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/UserResponse"
    post:
      tags:
        - Users
      summary: Create a user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UserRequest"
      responses:
        "200":
          description: Successful responnse
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: "#/components/schemas/UserResponse"
  /api/v2/users/{id}:
    parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
    get:
      tags:
        - Users
      summary: Fetch a user
      responses:
        "200":
          description: Successful responnse
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: "#/components/schemas/UserResponse"
    patch:
      tags:
        - Users
      summary: Update a user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UserRequest"
      responses:
        "200":
          description: Successful responnse
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: "#/components/schemas/UserResponse"
  /api/v2/offer_letters:
    get:
      tags:
        - Offers
      summary: "Fetch & search offer letters"
      parameters:
        - name: filters[ids]
          in: query
          description: "Comma separated list of Xpand Offer IDs"
          schema:
            type: array
            items:
              type: string
          explode: false
          example: "64891c74d5ee1bb16dfdafd8,64891e2ad5ee1bb16dfdafd9"
        - name: filters[offer_ids]
          in: query
          description: "Comma separated list of Client Offer IDs"
          schema:
            type: array
            items:
              type: string
          explode: false
          example: "64891c74d5ee1bb16dfdafd8,64891e2ad5ee1bb16dfdafd9"
        - name: filters[user_ids]
          in: query
          description: "Comma separated list of Xpand User IDs"
          schema:
            type: array
            items:
              type: string
          explode: false
          example: "64891c74d5ee1bb16dfdafd8,64891e2ad5ee1bb16dfdafd9"
        - name: filters[statuses]
          in: query
          description: "Comma separated list of Offer Statuses"
          schema:
            type: array
            items:
              $ref: "#/components/schemas/OfferLetterStatus"
          explode: false
          example: "pending_initiation,pending_approval"
        - name: page
          in: query
          schema:
            type: integer
            default: 1
          example: 7
      responses:
        "200":
          description: Successful responnse
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/OfferLetterResponse"
    post:
      tags:
        - Offers
      summary: "Create or update an offer letter"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/OfferLetterRequest"
      responses:
        "200":
          description: Successful responnse
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: "#/components/schemas/OfferLetterResponse"
  /api/v2/offer_letters/{id}:
    parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
    delete:
      tags:
        - Offers
      summary: Rescind an offer letter
      responses:
        "204":
          description: Successful responnse
  /api/v2/references:
    post:
      tags:
        - References
  /api/v2/references/job_profiles:
    get:
      tags:
        - References
  /api/v2/references/office_locations:
    get:
      tags:
        - References

components:
  schemas:
    UserRequest:
      type: object
      required:
        - email
        - first_name
        - last_name
        - start_date
        - hris_id
        - office_location_id
      properties:
        email:
          type: string
          example: "daniel@personal.com"
          description: "Must be a valid email address. Must be unique for each user. Non case-sensitive. Regex validation: ^(?!...)[a-zA-Z0-9][\\w-.]@[A-Za-z\\d-]+(.[A-Za-z\\d-]+)*.[A-Za-z]+$"
        work_email:
          type: string
          example: "daniel@company.com"
          description: "Must be a valid email address. Must be unique for each user. Non case-sensitive. Regex validation: ^(?!...)[a-zA-Z0-9][\\w-.]@[A-Za-z\\d-]+(.[A-Za-z\\d-]+)*.[A-Za-z]+$"
        first_name:
          type: string
          example: "Daniel"
          description: "Must not contain numbers or any of the following special characters !@#$%^&*()"
        last_name:
          type: string
          example: "Smith"
          description: "Must not contain numbers or any of the following special characters !@#$%^&*()"
        middle_name:
          type: string
          example: "Jones"
          description: "Must not contain numbers or any of the following special characters !@#$%^&*()"
        start_date:
          type: string
          description: "Format: YYYY-MM-DD. Can be present, or future dates only."
          example: "2023-09-08"
        employee_type:
          type: string
          description: "See reference values here for allowed employee type values."
          example: "Regular"
        candidate_status:
          type: string
          description: "See reference values here for allowed candidate status values."
          example: "offer_accepted"
        legal_entity:
          type: string
          description: "See reference values here for existing legal entity values."
          example: "Xpand Limited"
        cost_center_id:
          type: string
          description: "See reference values here for existing cost center values."
          example: "Cost Center"
        relocation_type:
          type: string
          description: "Allowes the relocation type values."
          example: "global_relocation"
        blocked:
          type: boolean
          description: "Disable or enable a user account in Xpand."
          example: "false"
        reason_blocked:
          type: string
          description: "A brief description of why the user why the user account is being disabled in Xpand"
          example: "inactive in ATS System"
        ats_id:
          type: string
          description: "This is the unique id of the Applicant Tracking System (ATS)"
          example: "external_ids: { ATS_ID: 'ATS123' }"
        hris_id:
          type: string
          description: "This is the employee id of the Human Resource Information Systems (HRIS)"
          example: "external_ids: { HRIS_ID: 'ATS123' }"
        office_location_id:
          type: string
          description: "JSON where key is name of external service, e.g. {'HRIS_ID': 'NEWYORK'. There must be an office location in Xpand with a matching employee id. See reference values here for existing office location external ids"
          example: "office_location_id: { workday: 'LOCATION-3-69' }"
        recruiter_ids:
          type: string
          description: "JSON where key is name of external service, e.g. {:recruiter=>{'HRIS_SYS'=>'12345'}, recruiting_manager=>{'HRIS_SYS'=>'56789'}} (There must be a recruiter in Xpand or HRIS_SYS(Ex: workday) with a matching employee id)"
          example: "recruiter: { workday: '12345' }"
        manager_ids:
          type: string
          description: "JSON where key is name of external service, e.g. {'HRIS_SYS': ['123456', '45678']} (There must be a manager in Xpand or HRIS with a matching employee id)"
          example: "manager_ids: { workday: '12345' }"
        documents:
          type: array
          description: "Array which holds the collection of document information"
          example: "documents: [{ document_type: 'type', document_title: 'title', files: [{file_name: 'abc', file_content_base64: 'base64'}]}]"
        educations:
          type: array
          description: "Array which holds the collection of education information"
          example: "educations: [{ school_name: 'School Name', degree: 'Bsc', files: [{file_name: 'abc', file_content_base64: 'base64'}]}]"
        work_experiences:
          type: array
          description: "Array which holds the collection of work experience information"
          example: "work_experiences: [{ employer: 'Xpand', employee_id: 'engineer', files: [{file_name: 'abc', file_content_base64: 'base64'}]}]"
        addresses:
          type: array
          description: "Array which holds the collection of addresse information"
          example: "addresses: [{ line_1: '1st street', line_2: '2nd street', files: [{file_name: 'abc', file_content_base64: 'base64'}]}]"
        phone_numbers:
          type: array
          description: "Array which holds the collection of phone number information"
          example: "phone_numbers: [{ number: '+91 9490142231', type: 'mobile', primary: true }]"
        offer_id:
          type: string
          example: "O3112-333"
        job_title:
          type: string
          example: "Steamboat Captain"
        currency:
          type: string
          description: "ISO 4217 Currency Code"
          example: USD
        base_salary:
          type: integer
          example: 45000
    UserResponse:
      type: object
      properties:
        id:
          type: string
          example: 64891c74d5ee1bb16dfdafd8
        first_name:
          type: string
          example: John
        last_name:
          type: string
          example: Doe
        email:
          type: string
          example: john@example.com
        start_date:
          type: string
          example: "2023-10-23"
        external_ids:
          type: object
          properties:
            ats_id:
              type: string
              example: C-123
            hris_id:
              type: string
              example: E1234
        office_location_id:
          type: object
          properties:
            workday:
              type: string
              example: 'LOCATION-3-69'
        recruiter_ids:
          type: object
          properties:
            recruiter:
              properties:
                hris_id:
                  type: string
                  example: R-123
            recruiting_coordinator:
              properties:
                hris_id:
                  type: string
                  example: R-1234
            recruiting_manager:
              properties:
                hris_id:
                  type: string
                  example: R-12345
        manager_ids:
          type: object
          properties:
            hris_id:
              type: array
              example: [M-123, M-1234]
        documents:
          type: array
          items:
            type: object
            properties:
              document_type:
                type: string
                example: offer_letter
              document_number:
                type: string
                example: 1234
              document_title:
                type: string
                example: Offer Letter
              document_description:
                type: string
                example: Offer Letter to the Joe
              issuer:
                type: string
                example: Issuer
              issuer_city:
                type: string
                example: New York
              issuer_state:
                type: string
                example: New York
              issuer_country:
                type: string
                example: USA
              issued_date:
                type: string
                example: "2021-10-23"
              expiry_date:
                type: string
                example: "2023-10-23"
              files:
                type: array
                items:
                  type: object
                  properties:
                    file_name:
                      type: string
                      example: abc.pdf
                    file_content_base64:
                      type: string
                      example: base64 string
        educations:
          type: array
          items:
            type: object
            properties:
              school_name:
                type: string
                example: School Name
              degree:
                type: string
                example: Degree
              student_id:
                type: string
                example: 1001
              time_type:
                type: string
                example: Full Time
              major:
                type: string
                example: Communications
              minor:
                type: string
                example: Publications
              gpa:
                type: integer
                example: 4
              specialization:
                type: string
                example: IT
              graduation_date:
                type: string
                example: "2021-10-23"
              grade:
                type: string
                example: A
              name_while_attending:
                type: string
                example: Jon Doe
              start_date:
                type: string
                example: "2021-10-23"
              end_date:
                type: string
                example: "2023-10-23"
              address:
                type: object
                properties:
                  street:
                    type: string
                    example: 4th Avenue
                  city:
                    type: string
                    example: New York
                  postal_code:
                    type: string
                    example: 10018
                  country:
                    type: string
                    example: USA
              files:
                type: array
                items:
                  type: object
                  properties:
                    file_name:
                      type: string
                      example: abc.pdf
                    file_content_base64:
                      type: string
                      example: base64 string
        work_experiences:
          type: array
          items:
            type: object
            properties:
              employer:
                type: string
                example: Employer
              employee_id:
                type: string
                example: E1234
              current:
                type: boolean
                example: true
              job_title:
                type: string
                example: Engineer
              department:
                type: string
                example: Department
              employment_type:
                type: string
                example: Regular
              reason_for_leaving:
                type: string
                example: Change in technology
              salary:
                type: integer
                example: 10000
              manager_name:
                type: string
                example: Manager 1
              manager_phone:
                type: string
                example: +1 4044578776
              manager_email:
                type: string
                example: manager@xpand.io
              hr_name:
                type: string
                example: HR 1
              hr_phone:
                type: string
                example: +1 4044578777
              hr_email:
                type: string
                example: hr@xpand.io
              start_date:
                type: string
                example: "2021-10-23"
              end_date:
                type: string
                example: "2023-10-23"
              address:
                type: object
                properties:
                  street:
                    type: string
                    example: 4th Avenue
                  city:
                    type: string
                    example: New York
                  postal_code:
                    type: string
                    example: 10018
                  country:
                    type: string
                    example: USA
              files:
                type: array
                items:
                  type: object
                  properties:
                    file_name:
                      type: string
                      example: abc.pdf
                    file_content_base64:
                      type: string
                      example: base64 string
        addresses:
          type: array
          items:
            type: object
            properties:
              line_1:
                type: string
                example: Street1
              line_2:
                type: string
                example: Street2
              line_3:
                type: string
                example: Street3
              city:
                type: string
                example: New York
              state:
                type: string
                example: New York
              postal_code:
                type: string
                example: 100018
              country:
                type: string
                example: USA
              current:
                type: boolean
                example: true
              permanent:
                type: boolean
                example: true
              start_date:
                type: string
                example: "2021-10-23"
              end_date:
                type: string
                example: "2023-10-23"
              files:
                type: array
                items:
                  type: object
                  properties:
                    file_name:
                      type: string
                      example: abc.pdf
                    file_content_base64:
                      type: string
                      example: base64 string
        phone_numbers:
          type: array
          items:
            type: object
            properties:
              number:
                type: string
                example: +1 4044580998
              type:
                type: string
                example: mobile
              primary:
                type: boolean
                example: true
    OfferLetterRequest:
      type: object
      properties:
        user_id:
          type: string
          example: "64892208d5ee1bb16dfdafda"
        offer_id:
          type: string
          example: "O3112-333"
        job_title:
          type: string
          example: "Steamboat Captain"
        currency:
          type: string
          description: "ISO 4217 Currency Code"
          example: USD
        base_salary:
          type: integer
          example: 45000
        start_date:
          type: string
          example: "2023-10-23"
    OfferLetterResponse:
      allOf:
        - type: object
          properties:
            id:
              type: string
              example: "64891c74d5ee1bb16dfdafd8"
        - $ref: '#/components/schemas/OfferLetterRequest'
    OfferLetterStatus:
      type: string
      example: pending_approval
      enum:
        - pending_initiation
        - pending_approval
        - admin_approved
        - admin_rejected
        - candidate_pending
        - candidate_accepted
        - candidate_declined
        - rescinded
        - voided
